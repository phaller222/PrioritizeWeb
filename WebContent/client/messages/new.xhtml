<!-- /*
 * Copyright 2015-2020 Peter Michael Haller and contributors
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ -->

<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:body>
	<ui:composition template="../templates/main.xhtml">
		<ui:define name="content">
			<p:outputPanel  id="sessionok" style="width:100%"
				rendered="#{loginBean.getLoggedIn()}">


				 <div style="font-size:20pt;margin-left:25px;margin-top:10px;margin-bottom:10px;" align="left">
                <img src="../../images/messagebig.png" title="New" />
                Messages / New</div>
                                <p:tabView>
                                <p:tab title="New Message">
			
					<h:form id="form">
						<h:panelGrid styleClass="border" columns="1" layout="grid"
							footerClass=".ui-widget-footer" headerClass=".ui-widget-header"
							frame="box" rules="groups" cellpadding="10"
							style="margin-left:50px;width:90%">

							<f:facet name="header">
								<h:outputText value="ComposeMessage"></h:outputText>
							</f:facet>

							<h:outputText value="Recipiant: "></h:outputText>
							<p:autoComplete value="#{messageBean.to}" completeMethod="#{messageBean.completeRecipiantList}"/>
							
				
							<!-- <p:selectOneMenu style="width:300px;" id="users" rendered="true"
								value="#{messageBean.to}">
								<f:selectItems value="#{messageBean.recipiantList}" var="user"
									itemValue="#{user.id}" itemLabel="#{user.name}"
									itemDescription="#{user.name}" />

							</p:selectOneMenu> -->

							<h:outputText value="Subject:">
							</h:outputText>
							<p:inputText id="subject" rendered="true"
								value="#{messageBean.subject}" style="width:300px;">
							</p:inputText>


							<p:editor id="message" rendered="true"
								value="#{messageBean.message}" style="width:850px;">
							</p:editor>

							<f:facet name="footer">
								<p:commandButton id="sentAction" value="Send"
									icon="ui-icon-mail-closed" action="#{messageBean.sendMessage}"
									ajax="false" style="width:220px"></p:commandButton>
							</f:facet>
						</h:panelGrid>
					</h:form>
					</p:tab>
					</p:tabView>
			
			</p:outputPanel>

		</ui:define>
	</ui:composition>
</h:body>

</html>
